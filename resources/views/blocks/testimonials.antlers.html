{{ once }}
    {{ push:scripts }}
        {{ vite src="resources/js/fetchEntries.js" }}
    {{ /push:scripts }}
{{ /once }}

<section
    id="{{ type | slugify }}"
    class="m-section"
    x-data="fetchEntries({
        collection: 'testimonials',
        entriesPerPage: {{ limit }},
        sort: 'order',
    })"
>
    <div class="container">
        {{ partial:partials/section-header }}

        {{ if query === 'custom' }}
            {{ $entries = entries }}
        {{ elseif query === 'latest' }}
            {{ $entries = {collection:testimonials :limit="limit" sort="date:desc"} }}
        {{ elseif query === 'featured' }}
            {{ $entries = {collection:testimonials :limit="limit" featured:is="true" sort="order"} }}
        {{ /if }}

        <div class="site-grid">
            {{ $entries }}
                <div class="sm:col-span-6 lg:col-span-4">
                    {{ partial:partials/entry-testimonials }}
                </div>
            {{ /$entries }}

            <template x-for="(entry, index) in entries">
                <div class="sm:col-span-6 lg:col-span-4">
                    {{ partial:partials/alpine/entry-testimonials }}
                </div>
            </template>
        </div>

        <div x-show="nextPage" class="text-center mt-16">
            <button class="btn btn--secondary" @click="loadMore()" :disabled="loading">
                Load more
            </button>
        </div>
    </div>
</section>
